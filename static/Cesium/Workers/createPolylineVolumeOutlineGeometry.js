define(["./when-208fe5b0","./Cartesian2-716c2715","./arrayRemoveDuplicates-28d5a12e","./BoundingRectangle-307ba31b","./Transforms-f1816abc","./ComponentDatatype-549ec0d3","./PolylineVolumeGeometryLibrary-667758da","./Check-d18af7c4","./GeometryAttribute-0ee94cf1","./GeometryAttributes-b0b294d8","./IndexDatatype-d9b71b2b","./Math-3ba16bed","./PolygonPipeline-ac89187a","./RuntimeError-7f634f5d","./WebGLConstants-76bb35d1","./EllipsoidTangentPlane-8e486e83","./IntersectionTests-680c4e46","./Plane-f5dfabcd","./PolylinePipeline-fe86878e","./EllipsoidGeodesic-4bc5cec5","./EllipsoidRhumbLine-886cd793"],function(d,u,t,o,c,y,a,h,f,g,m,n,l,e,i,r,s,p,v,E,b){"use strict";function P(e){var i=(e=d.defaultValue(e,d.defaultValue.EMPTY_OBJECT)).polylinePositions,r=e.shapePositions;if(!d.defined(i))throw new h.DeveloperError("options.polylinePositions is required.");if(!d.defined(r))throw new h.DeveloperError("options.shapePositions is required.");this._positions=i,this._shape=r,this._ellipsoid=u.Ellipsoid.clone(d.defaultValue(e.ellipsoid,u.Ellipsoid.WGS84)),this._cornerType=d.defaultValue(e.cornerType,a.CornerType.ROUNDED),this._granularity=d.defaultValue(e.granularity,n.CesiumMath.RADIANS_PER_DEGREE),this._workerName="createPolylineVolumeOutlineGeometry";i=1+i.length*u.Cartesian3.packedLength;i+=1+r.length*u.Cartesian2.packedLength,this.packedLength=i+u.Ellipsoid.packedLength+2}P.pack=function(e,i,r){if(!d.defined(e))throw new h.DeveloperError("value is required");if(!d.defined(i))throw new h.DeveloperError("array is required");var n;r=d.defaultValue(r,0);var t=e._positions,o=t.length;for(i[r++]=o,n=0;n<o;++n,r+=u.Cartesian3.packedLength)u.Cartesian3.pack(t[n],i,r);var a=e._shape,o=a.length;for(i[r++]=o,n=0;n<o;++n,r+=u.Cartesian2.packedLength)u.Cartesian2.pack(a[n],i,r);return u.Ellipsoid.pack(e._ellipsoid,i,r),r+=u.Ellipsoid.packedLength,i[r++]=e._cornerType,i[r]=e._granularity,i};var _=u.Ellipsoid.clone(u.Ellipsoid.UNIT_SPHERE),k={polylinePositions:void 0,shapePositions:void 0,ellipsoid:_,height:void 0,cornerType:void 0,granularity:void 0};P.unpack=function(e,i,r){if(!d.defined(e))throw new h.DeveloperError("array is required");i=d.defaultValue(i,0);for(var n=e[i++],t=new Array(n),o=0;o<n;++o,i+=u.Cartesian3.packedLength)t[o]=u.Cartesian3.unpack(e,i);var n=e[i++],a=new Array(n);for(o=0;o<n;++o,i+=u.Cartesian2.packedLength)a[o]=u.Cartesian2.unpack(e,i);var l=u.Ellipsoid.unpack(e,i,_);i+=u.Ellipsoid.packedLength;var s=e[i++],p=e[i];return d.defined(r)?(r._positions=t,r._shape=a,r._ellipsoid=u.Ellipsoid.clone(l,r._ellipsoid),r._cornerType=s,r._granularity=p,r):(k.polylinePositions=t,k.shapePositions=a,k.cornerType=s,k.granularity=p,new P(k))};var C=new o.BoundingRectangle;return P.createGeometry=function(e){var i=e._positions,r=t.arrayRemoveDuplicates(i,u.Cartesian3.equalsEpsilon),n=e._shape,n=a.PolylineVolumeGeometryLibrary.removeDuplicatesFromShape(n);if(!(r.length<2||n.length<3)){l.PolygonPipeline.computeWindingOrder2D(n)===l.WindingOrder.CLOCKWISE&&n.reverse();i=o.BoundingRectangle.fromPoints(n,C);return function(e,i){var r=new g.GeometryAttributes;r.position=new f.GeometryAttribute({componentDatatype:y.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:e});var n=i.length,i=r.position.values.length/3,t=e.length/3/n,o=m.IndexDatatype.createTypedArray(i,2*n*(1+t)),a=0,l=0,s=l*n;for(u=0;u<n-1;u++)o[a++]=u+s,o[a++]=u+s+1;for(o[a++]=n-1+s,o[a++]=s,s=(l=t-1)*n,u=0;u<n-1;u++)o[a++]=u+s,o[a++]=u+s+1;for(o[a++]=n-1+s,o[a++]=s,l=0;l<t-1;l++)for(var p=n*l,d=p+n,u=0;u<n;u++)o[a++]=u+p,o[a++]=u+d;return new f.Geometry({attributes:r,indices:m.IndexDatatype.createTypedArray(i,o),boundingSphere:c.BoundingSphere.fromVertices(e),primitiveType:f.PrimitiveType.LINES})}(a.PolylineVolumeGeometryLibrary.computePositions(r,n,i,e,!1),n)}},function(e,i){return(e=d.defined(i)?P.unpack(e,i):e)._ellipsoid=u.Ellipsoid.clone(e._ellipsoid),P.createGeometry(e)}});
//# sourceMappingURL=createPolylineVolumeOutlineGeometry.js.map
